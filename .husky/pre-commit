# Run ayokoding-web pre-commit scripts if affected (titles update + nav regen)
nx affected -t run-pre-commit --skip-nx-cache 2>/dev/null || echo "⚠️  Skipping run-pre-commit (not affected or binary missing)"

# Stage any changes made by the scripts
git add apps/ayokoding-web/content/ 2>/dev/null || true

# Run lint-staged for formatting
npx lint-staged

# Validate markdown links in staged files
python3 scripts/validate-links.py --staged-only || exit 1
